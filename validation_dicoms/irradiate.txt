# Demonstrates use of a DICOM file.
# You must unzip Abdomen.zip before you run this example.
# Reads in and displays a 3 slice scan of an abdomen.
# The display writes very slowly to the screen.
# This will be improved in an upcoming new release.
# Until then, one useful trick is that if you iconize the graphics window,
# then un-inconize it when drawing is done, the drawing will go much faster.

includeFile = HUtoMaterialSchneider.txt



s:Ge/World/Material  = "Vacuum"
d:Ge/World/HLX       = 8.0 m
d:Ge/World/HLY       = 8.0 m
d:Ge/World/HLZ       = 8.0 m
b:Ge/World/Invisible = "TRUE"


i:Ts/Seed = 1
b:Ts/ShowCPUTime = "True"
i:Ts/NumberOfThreads = 0
i:Ts/ShowHistoryCountAtInterval = 100000
i:Ts/ParameterizationErrorMaxReports= 1


s:Ge/Patient/Parent             = "World"
#s:Ge/Patient/Material           = "G4_WATER"
s:Ge/Patient/Type               = "TsDicomPatient"
d:Ge/Patient/TransX             = 0. m
d:Ge/Patient/TransY             = 0. m
d:Ge/Patient/TransZ             = 0. m
d:Ge/Patient/RotX               = 0. deg
d:Ge/Patient/RotY               = 0. deg
d:Ge/Patient/RotZ               = 0. deg

s:Ge/Patient/DicomDirectory     = "68x68x150_0_HU_box"
sv:Ge/Patient/DicomModalityTags = 1 "CT"



# Simplify physics for faster start of this demonstration
# Define the physics (This is the clinical list)
s:Ph/ListName         = "Default"
b:Ph/ListProcesses    = "False" # Set true to dump list of active physics processes to console
s:Ph/Default/Type     = "Geant4_Modular"
sv:Ph/Default/Modules = 1 "g4em-standard_opt3" 
d:Ph/Default/EMRangeMin = 100. eV
d:Ph/Default/EMRangeMax = 500. MeV
d:Ph/Default/CutForElectron = 0.1 cm
d:Ph/Default/CutForGamma = 50 cm
d:Ph/Default/CutForPositron = 0.1 cm


s:So/Beam1/Type                     = "Beam"
s:So/Beam1/Component                = "BeamPosition"
s:So/Beam1/BeamParticle             = "e-"
d:So/Beam1/BeamEnergy               = 100 MeV
u:So/Beam1/BeamEnergySpread         = 0
s:So/Beam1/BeamPositionDistribution = "Gaussian"
s:So/Beam1/BeamPositionCutoffShape  = "Ellipse"
d:So/Beam1/BeamPositionCutoffX      = 10. cm   # X extent of position (if Flat or Gaussian)
d:So/Beam1/BeamPositionCutoffY      = 10. cm   # Y extent of position (if Flat or Gaussian)
d:So/Beam1/BeamPositionSpreadX      = 0.1 cm  # distribution (if Gaussian)
d:So/Beam1/BeamPositionSpreadY      = 0.1 cm  # distribution (if Gaussian)
s:So/Beam1/BeamAngularDistribution  = "None"
d:So/Beam1/BeamAngularCutoffX       = 90. deg
d:So/Beam1/BeamAngularCutoffY       = 90. deg
d:So/Beam1/BeamAngularSpreadX       = 0.0 deg
d:So/Beam1/BeamAngularSpreadY       = 0.0 deg
ic:So/Beam1/NumberOfHistoriesInRun  = 100000


s:Ge/BeamPosition/Parent = "World"
s:Ge/BeamPosition/Type   = "Group"
d:Ge/BeamPosition/TransX = 0. cm
d:Ge/BeamPosition/TransY = 0. cm
d:Ge/BeamPosition/TransZ = -150 mm
d:Ge/BeamPosition/RotX   = 0. deg
d:Ge/BeamPosition/RotY   = 0 deg
d:Ge/BeamPosition/RotZ   = 0. deg



dc:Ge/Patient/DicomOriginX = 0.0 mm
dc:Ge/Patient/DicomOriginY = 0.0 mm
dc:Ge/Patient/DicomOriginZ = 0.0 mm




s:Sc/DoseOnRTGrid/Quantity                  = "DoseToMedium"
s:Sc/DoseOnRTGrid/Component                 = "Patient"
s:Sc/DoseOnRTGrid/OutputFile = "68x68x150_0_HU_box"

b:Sc/DoseOnRTGrid/OutputToConsole           = "F"
s:Sc/DoseOnRTGrid/IfOutputFileAlreadyExists = "Overwrite"
s:Sc/DoseOnRTGrid/OutputType                = "DICOM"
b:Sc/DoseOnRTGrid/OutputAfterRun = "True"

sv:Sc/DoseOnRTGrid/Report = 1 "Sum"
b:Sc/DoseOnRTGrid/PreCalculateStoppingPowerRatios = "True" # defaults to "False"

b:Sc/DoseOnRTGrid/DICOMOutput32BitsPerPixel = "False"
